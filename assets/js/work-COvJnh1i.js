import"./clean-urls.js_v_1.2-BgESDdPp.js";import"./cursor.js_v_1.2-D1XcpVVk.js";class t{constructor(){this.galleries=document.querySelectorAll(".photo-gallery"),this.isDragging=!1,this.startX=0,this.scrollLeft=0,this.velocity=0,this.lastX=0,this.lastTime=0,this.animationId=null,this.dragThreshold=5,this.scrollbarTimeout=null,this.init()}init(){this.galleries.forEach((t,e)=>{this.setupGallery(t,e)})}setupGallery(t,e){const s=t.querySelector(".gallery-container");s&&(s.style.userSelect="none",s.setAttribute("data-drag-scroll","true"),s.setAttribute("data-drag-state","grab"),s.scrollableParent=t,s.addEventListener("mousedown",t=>this.startDrag(t,s)),s.addEventListener("mousemove",t=>this.drag(t,s)),s.addEventListener("mouseup",()=>this.endDrag(s)),s.addEventListener("mouseleave",()=>this.endDrag(s)),s.addEventListener("contextmenu",t=>{this.isDragging&&t.preventDefault()}))}startDrag(t,e){if(0!==t.button)return;this.isDragging=!0,this.startX=t.pageX-e.offsetLeft,this.scrollLeft=e.scrollableParent.scrollLeft,this.velocity=0,this.lastX=t.pageX,this.lastTime=Date.now(),e.setAttribute("data-drag-state","grabbing"),this.scrollbarTimeout&&(clearTimeout(this.scrollbarTimeout),this.scrollbarTimeout=null);e.scrollableParent.classList.add("show-scrollbars"),t.preventDefault()}drag(t,e){if(!this.isDragging)return;t.preventDefault();const s=1.5*(t.pageX-e.offsetLeft-this.startX),i=Date.now(),r=i-this.lastTime;r>0&&(this.velocity=(t.pageX-this.lastX)/r),this.lastX=t.pageX,this.lastTime=i;if(Math.abs(t.pageX-(this.startX+e.offsetLeft))<this.dragThreshold)return;const a=e.scrollableParent,l=this.scrollLeft-s,o=a.scrollWidth-a.clientWidth;let n=l;l<0?n=0:l>o&&(n=o),a.scrollLeft=n}endDrag(t){if(!this.isDragging)return;this.isDragging=!1,t.setAttribute("data-drag-state","grab");const e=t.scrollableParent;e.classList.add("show-scrollbars"),this.scrollbarTimeout&&clearTimeout(this.scrollbarTimeout),this.scrollbarTimeout=setTimeout(()=>{e.classList.remove("show-scrollbars")},2e3),Math.abs(this.velocity)>.1&&this.applyInertia(t)}applyInertia(t){const e=()=>{if(Math.abs(this.velocity)<.1)return void(this.velocity=0);const s=t.scrollableParent,i=s.scrollLeft-16*this.velocity,r=s.scrollWidth-s.clientWidth;let a=i;i<0?(a=0,this.velocity=0):i>r&&(a=r,this.velocity=0),s.scrollLeft=a,this.velocity*=.95,this.animationId=requestAnimationFrame(e)};this.animationId&&cancelAnimationFrame(this.animationId),e()}isCurrentlyDragging(){return this.isDragging}destroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.galleries.forEach(t=>{const e=t.querySelector(".gallery-container");e&&(e.removeEventListener("mousedown",t=>this.startDrag(t,e)),e.removeEventListener("mousemove",t=>this.drag(t,e)),e.removeEventListener("mouseup",()=>this.endDrag(e)),e.removeEventListener("mouseleave",()=>this.endDrag(e)),e.removeEventListener("contextmenu",t=>{this.isDragging&&t.preventDefault()}))})}}function e(){if("ontouchstart"in window||navigator.maxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches)return;0!==document.querySelectorAll(".photo-gallery").length?window.dragScroll=new t:setTimeout(e,100)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e();
