import"./clean-urls.js_v_1.2-BgESDdPp.js";const t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),e=__DEFINES__;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,e);if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function s(t,e,i){return(e=n(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.keys(e).forEach(i=>{const n=i.split(".");let s=t;for(let t=0;t<n.length;t++){const o=n[t];t===n.length-1?s[o]=e[i]:s=s[o]||(s[o]={})}});function o(t){const e=new Error(t.message||"Unknown invoke error");return Object.assign(e,t,{runnerError:new Error("RunnerError")}),e}"undefined"!=typeof process&&process.platform;const r=t=>{if(t.invoke)return{...t,async invoke(e,i){const n=await t.invoke({type:"custom",event:"vite:invoke",data:{id:"send",name:e,data:i}});if("error"in n)throw o(n.error);return n.result}};if(!t.send||!t.connect)throw new Error("transport must implement send and connect when invoke is not implemented");const e=new Map;return{...t,connect:({onMessage:i,onDisconnection:n})=>t.connect({onMessage(t){if("custom"===t.type&&"vite:invoke"===t.event){const i=t.data;if(i.id.startsWith("response:")){const t=i.id.slice(9),n=e.get(t);if(!n)return;n.timeoutId&&clearTimeout(n.timeoutId),e.delete(t);const{error:s,result:o}=i.data;return void(s?n.reject(s):n.resolve(o))}}i(t)},onDisconnection:n}),disconnect:()=>(e.forEach(t=>{t.reject(new Error(`transport was disconnected, cannot call ${JSON.stringify(t.name)}`))}),e.clear(),t.disconnect?.()),send:e=>t.send(e),async invoke(i,n){const s=((t=21)=>{let e="",i=0|t;for(;i--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e})(),r={type:"custom",event:"vite:invoke",data:{name:i,id:`send:${s}`,data:n}},a=t.send(r),{promise:c,resolve:l,reject:d}=function(){let t,e;return{promise:new Promise((i,n)=>{t=i,e=n}),resolve:t,reject:e}}(),h=t.timeout??6e4;let u;h>0&&(u=setTimeout(()=>{e.delete(s),d(new Error(`transport invoke timed out after ${h}ms (data: ${JSON.stringify(r)})`))},h),u?.unref?.()),e.set(s,{resolve:l,reject:d,name:i,timeoutId:u}),a&&a.catch(t=>{clearTimeout(u),e.delete(s),d(t)});try{return await c}catch(m){throw o(m)}}}},a=t=>{const e=t.pingInterval??3e4;let i,n;return{async connect({onMessage:s,onDisconnection:o}){const r=t.createConnection();r.addEventListener("message",async({data:t})=>{s(JSON.parse(t))});let a=r.readyState===r.OPEN;a||await new Promise((t,e)=>{r.addEventListener("open",()=>{a=!0,t()},{once:!0}),r.addEventListener("close",async()=>{a?(s({type:"custom",event:"vite:ws:disconnect",data:{webSocket:r}}),o()):e(new Error("WebSocket closed without opened."))})}),s({type:"custom",event:"vite:ws:connect",data:{webSocket:r}}),i=r,n=setInterval(()=>{r.readyState===r.OPEN&&r.send(JSON.stringify({type:"ping"}))},e)},disconnect(){clearInterval(n),i?.close()},send(t){i.send(JSON.stringify(t))}}};var c=class{constructor(){s(this,"queue",[]),s(this,"pending",!1)}enqueue(t){return new Promise((e,i)=>{this.queue.push({promise:t,resolve:e,reject:i}),this.dequeue()})}dequeue(){if(this.pending)return!1;const t=this.queue.shift();return!!t&&(this.pending=!0,t.promise().then(t.resolve).catch(t.reject).finally(()=>{this.pending=!1,this.dequeue()}),!0)}};const l=__HMR_CONFIG_NAME__,d=__BASE__||"/";function h(t,e={},...i){const n=document.createElement(t);for(const[s,o]of Object.entries(e))n.setAttribute(s,o);return n.append(...i),n}const u=/(?:file:\/\/)?(?:[a-zA-Z]:\\|\/).*?:\d+:\d+/g,m=/^(?:>?\s*\d+\s+\|.*|\s+\|\s*\^.*)\r?\n/gm,{HTMLElement:p=class{}}=globalThis;const f="vite-error-overlay",{customElements:v}=globalThis;v&&!v.get(f)&&v.define(f,class extends p{constructor(t,e=!0){super(),s(this,"root",void 0),s(this,"closeOnEsc",void 0),this.root=this.attachShadow({mode:"open"}),this.root.appendChild(h("div",{class:"backdrop",part:"backdrop"},h("div",{class:"window",part:"window"},h("pre",{class:"message",part:"message"},h("span",{class:"plugin",part:"plugin"}),h("span",{class:"message-body",part:"message-body"})),h("pre",{class:"file",part:"file"}),h("pre",{class:"frame",part:"frame"}),h("pre",{class:"stack",part:"stack"}),h("div",{class:"tip",part:"tip"},"Click outside, press ",h("kbd",{},"Esc")," key, or fix the code to dismiss.",h("br"),"You can also disable this overlay by setting ",h("code",{part:"config-option-name"},"server.hmr.overlay")," to ",h("code",{part:"config-option-value"},"false")," in ",h("code",{part:"config-file-name"},l),".")),h("style",{},"\n:host {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 99999;\n  --monospace: 'SFMono-Regular', Consolas,\n  'Liberation Mono', Menlo, Courier, monospace;\n  --red: #ff5555;\n  --yellow: #e2aa53;\n  --purple: #cfa4ff;\n  --cyan: #2dd9da;\n  --dim: #c9c9c9;\n\n  --window-background: #181818;\n  --window-color: #d8d8d8;\n}\n\n.backdrop {\n  position: fixed;\n  z-index: 99999;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow-y: scroll;\n  margin: 0;\n  background: rgba(0, 0, 0, 0.66);\n}\n\n.window {\n  font-family: var(--monospace);\n  line-height: 1.5;\n  max-width: 80vw;\n  color: var(--window-color);\n  box-sizing: border-box;\n  margin: 30px auto;\n  padding: 2.5vh 4vw;\n  position: relative;\n  background: var(--window-background);\n  border-radius: 6px 6px 8px 8px;\n  box-shadow: 0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22);\n  overflow: hidden;\n  border-top: 8px solid var(--red);\n  direction: ltr;\n  text-align: left;\n}\n\npre {\n  font-family: var(--monospace);\n  font-size: 16px;\n  margin-top: 0;\n  margin-bottom: 1em;\n  overflow-x: scroll;\n  scrollbar-width: none;\n}\n\npre::-webkit-scrollbar {\n  display: none;\n}\n\npre.frame::-webkit-scrollbar {\n  display: block;\n  height: 5px;\n}\n\npre.frame::-webkit-scrollbar-thumb {\n  background: #999;\n  border-radius: 5px;\n}\n\npre.frame {\n  scrollbar-width: thin;\n}\n\n.message {\n  line-height: 1.3;\n  font-weight: 600;\n  white-space: pre-wrap;\n}\n\n.message-body {\n  color: var(--red);\n}\n\n.plugin {\n  color: var(--purple);\n}\n\n.file {\n  color: var(--cyan);\n  margin-bottom: 0;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.frame {\n  color: var(--yellow);\n}\n\n.stack {\n  font-size: 13px;\n  color: var(--dim);\n}\n\n.tip {\n  font-size: 13px;\n  color: #999;\n  border-top: 1px dotted #999;\n  padding-top: 13px;\n  line-height: 1.8;\n}\n\ncode {\n  font-size: 13px;\n  font-family: var(--monospace);\n  color: var(--yellow);\n}\n\n.file-link {\n  text-decoration: underline;\n  cursor: pointer;\n}\n\nkbd {\n  line-height: 1.5;\n  font-family: ui-monospace, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n  font-size: 0.75rem;\n  font-weight: 700;\n  background-color: rgb(38, 40, 44);\n  color: rgb(166, 167, 171);\n  padding: 0.15rem 0.3rem;\n  border-radius: 0.25rem;\n  border-width: 0.0625rem 0.0625rem 0.1875rem;\n  border-style: solid;\n  border-color: rgb(54, 57, 64);\n  border-image: initial;\n}\n"))),m.lastIndex=0;const i=t.frame&&m.test(t.frame),n=i?t.message.replace(m,""):t.message;t.plugin&&this.text(".plugin",`[plugin:${t.plugin}] `),this.text(".message-body",n.trim());const[o]=(t.loc?.file||t.id||"unknown file").split("?");t.loc?this.text(".file",`${o}:${t.loc.line}:${t.loc.column}`,e):t.id&&this.text(".file",o),i&&this.text(".frame",t.frame.trim()),this.text(".stack",t.stack,e),this.root.querySelector(".window").addEventListener("click",t=>{t.stopPropagation()}),this.addEventListener("click",()=>{this.close()}),this.closeOnEsc=t=>{"Escape"!==t.key&&"Escape"!==t.code||this.close()},document.addEventListener("keydown",this.closeOnEsc)}text(t,e,i=!1){const n=this.root.querySelector(t);if(i){let t,i=0;for(u.lastIndex=0;t=u.exec(e);){const{0:s,index:o}=t,r=e.slice(i,o);n.appendChild(document.createTextNode(r));const a=document.createElement("a");a.textContent=s,a.className="file-link",a.onclick=()=>{fetch(new URL(`${d}__open-in-editor?file=${encodeURIComponent(s)}`,import.meta.url))},n.appendChild(a),i+=r.length+s.length}i<e.length&&n.appendChild(document.createTextNode(e.slice(i)))}else n.textContent=e}close(){this.parentNode?.removeChild(this),document.removeEventListener("keydown",this.closeOnEsc)}});const w=new URL(import.meta.url),y=(__SERVER_HOST__,__HMR_PROTOCOL__||("https:"===w.protocol?"wss":"ws")),g=__HMR_PORT__,x=`${__HMR_HOSTNAME__||w.hostname}:${g||w.port}${__HMR_BASE__}`,b=__HMR_DIRECT_TARGET__,k=__BASE__||"/",T=__HMR_TIMEOUT__,E=__WS_TOKEN__,S=(t=>{const e=r(t);let i,n=!e.connect;return{...t,...e.connect?{async connect(t){if(n)return;if(i)return void(await i);const s=e.connect({onMessage:t??(()=>{}),onDisconnection(){n=!1}});s&&(i=s,await i,i=void 0),n=!0}}:{},...e.disconnect?{async disconnect(){n&&(i&&await i,n=!1,await e.disconnect())}}:{},async send(t){if(e.send){if(!n){if(!i)throw new Error("send was called before connect");await i}await e.send(t)}},async invoke(t,s){if(!n){if(!i)throw new Error("invoke was called before connect");await i}return e.invoke(t,s)}}})((()=>{let t=a({createConnection:()=>new WebSocket(`${y}://${x}?token=${E}`,"vite-hmr"),pingInterval:T});return{async connect(e){try{await t.connect(e)}catch(i){if(!g){t=a({createConnection:()=>new WebSocket(`${y}://${b}?token=${E}`,"vite-hmr"),pingInterval:T});try{await t.connect(e)}catch(n){if(n instanceof Error&&n.message.includes("WebSocket closed without opened.")){const t=new URL(import.meta.url);t.host,t.pathname.replace(/@vite\/client$/,"")}}return}throw i}},async disconnect(){await t.disconnect()},send(e){t.send(e)}}})());let C=!1;function M(t){const e=new URL(t,"http://vite.dev");return e.searchParams.delete("direct"),e.pathname+e.search}"undefined"!=typeof window&&window.addEventListener?.("beforeunload",()=>{C=!0});let P=!0;const L=new WeakSet,_=(t=>{let e;return()=>{e&&(clearTimeout(e),e=null),e=setTimeout(()=>{location.reload()},t)}})(20),I=new class{constructor(t,e,i){this.logger=t,this.transport=e,this.importUpdatedModule=i,s(this,"hotModulesMap",new Map),s(this,"disposeMap",new Map),s(this,"pruneMap",new Map),s(this,"dataMap",new Map),s(this,"customListenersMap",new Map),s(this,"ctxToListenersMap",new Map),s(this,"currentFirstInvalidatedBy",void 0),s(this,"updateQueue",[]),s(this,"pendingUpdateQueue",!1)}async notifyListeners(t,e){const i=this.customListenersMap.get(t);i&&await Promise.allSettled(i.map(t=>t(e)))}send(t){this.transport.send(t).catch(t=>{this.logger.error(t)})}clear(){this.hotModulesMap.clear(),this.disposeMap.clear(),this.pruneMap.clear(),this.dataMap.clear(),this.customListenersMap.clear(),this.ctxToListenersMap.clear()}async prunePaths(t){await Promise.all(t.map(t=>{const e=this.disposeMap.get(t);if(e)return e(this.dataMap.get(t))})),t.forEach(t=>{const e=this.pruneMap.get(t);e&&e(this.dataMap.get(t))})}warnFailedUpdate(t,e){t instanceof Error&&t.message.includes("fetch")||this.logger.error(t),this.logger.error(`Failed to reload ${e}. This could be due to syntax errors or importing non-existent modules. (see errors above)`)}async queueUpdate(t){if(this.updateQueue.push(this.fetchUpdate(t)),!this.pendingUpdateQueue){this.pendingUpdateQueue=!0,await Promise.resolve(),this.pendingUpdateQueue=!1;const t=[...this.updateQueue];this.updateQueue=[],(await Promise.all(t)).forEach(t=>t&&t())}}async fetchUpdate(t){const{path:e,acceptedPath:i,firstInvalidatedBy:n}=t,s=this.hotModulesMap.get(e);if(!s)return;let o;const r=e===i,a=s.callbacks.filter(({deps:t})=>t.includes(i));if(r||a.length>0){const e=this.disposeMap.get(i);e&&await e(this.dataMap.get(i));try{o=await this.importUpdatedModule(t)}catch(c){this.warnFailedUpdate(c,i)}}return()=>{try{this.currentFirstInvalidatedBy=n;for(const{deps:e,fn:n}of a)n(e.map(t=>t===i?o:void 0));const t=r?e:`${i} via ${e}`;this.logger.debug(`hot updated: ${t}`)}finally{this.currentFirstInvalidatedBy=void 0}}}}({error:t=>{},debug:(...t)=>{}},S,async function({acceptedPath:t,timestamp:e,explicitImportRequired:i,isWithinCircularImport:n}){const[s,o]=t.split("?"),r=import(k+s.slice(1)+`?${i?"import&":""}t=${e}${o?`&${o}`:""}`);return n&&r.catch(()=>{_()}),await r});S.connect(function(t){const e=new c;return i=>e.enqueue(()=>t(i))}(async function(t){switch(t.type){case"connected":case"ping":break;case"update":if(await I.notifyListeners("vite:beforeUpdate",t),R){if(P&&document.querySelectorAll(f).length)return void location.reload();A&&$(),P=!1}await Promise.all(t.updates.map(async t=>{if("js-update"===t.type)return I.queueUpdate(t);const{path:e,timestamp:i}=t,n=M(e),s=Array.from(document.querySelectorAll("link")).find(t=>!L.has(t)&&M(t.href).includes(n));if(!s)return;const o=`${k}${n.slice(1)}${n.includes("?")?"&":"?"}t=${i}`;return new Promise(t=>{const e=s.cloneNode();e.href=new URL(o,s.href).href;const i=()=>{s.remove(),t()};e.addEventListener("load",i),e.addEventListener("error",i),L.add(s),s.after(e)})})),await I.notifyListeners("vite:afterUpdate",t);break;case"custom":if(await I.notifyListeners(t.event,t.data),"vite:ws:disconnect"===t.event&&R&&!C){const e=t.data.webSocket,i=new URL(e.url);i.search="",await function(t){if("undefined"==typeof SharedWorker){const e={currentState:document.visibilityState,listeners:new Set},i=()=>{e.currentState=document.visibilityState;for(const t of e.listeners)t(e.currentState)};return document.addEventListener("visibilitychange",i),O(t,e)}const e=new Blob(['"use strict";',`const waitForSuccessfulPingInternal = ${O.toString()};`,`const fn = ${N.toString()};`,`fn(${JSON.stringify(t)})`],{type:"application/javascript"}),i=URL.createObjectURL(e),n=new SharedWorker(i);return new Promise((t,e)=>{const i=()=>{n.port.postMessage({visibility:document.visibilityState})};document.addEventListener("visibilitychange",i),n.port.addEventListener("message",s=>{document.removeEventListener("visibilitychange",i),n.port.close();const o=s.data;"error"!==o.type?t():e(o.error)}),i(),n.port.start()})}(i.href),location.reload()}break;case"full-reload":if(await I.notifyListeners("vite:beforeFullReload",t),R){if(t.path&&t.path.endsWith(".html")){const e=decodeURI(location.pathname),i=k+t.path.slice(1);return void((e===i||"/index.html"===t.path||e.endsWith("/")&&e+"index.html"===i)&&_())}_()}break;case"prune":await I.notifyListeners("vite:beforePrune",t),await I.prunePaths(t.paths);break;case"error":if(await I.notifyListeners("vite:error",t),R){const e=t.err;A&&function(t){$();const{customElements:e}=globalThis;if(e){const i=e.get(f);document.body.appendChild(new i(t))}}(e)}break;default:return t}}));const A=__HMR_ENABLE_OVERLAY__,R="document"in globalThis;function $(){document.querySelectorAll(f).forEach(t=>t.close())}function N(t){self.addEventListener("connect",e=>{const i=e.ports[0];if(!t)return void i.postMessage({type:"error",error:new Error("socketUrl not found")});const n={currentState:"visible",listeners:new Set};i.addEventListener("message",t=>{const{visibility:e}=t.data;n.currentState=e;for(const i of n.listeners)i(e)}),i.start(),O(t,n).then(()=>{try{i.postMessage({type:"success"})}catch(t){i.postMessage({type:"error",error:t})}},t=>{try{i.postMessage({type:"error",error:t})}catch(e){i.postMessage({type:"error",error:e})}})})}async function O(t,e,i=1e3){function n(t){return new Promise(e=>setTimeout(e,t))}async function s(){try{const e=new WebSocket(t,"vite-ping");return new Promise(t=>{function i(){t(!0),s()}function n(){t(!1),s()}function s(){e.removeEventListener("open",i),e.removeEventListener("error",n),e.close()}e.addEventListener("open",i),e.addEventListener("error",n)})}catch{return!1}}function o(t){return new Promise(e=>{const i=n=>{"visible"===n&&(e(),t.listeners.delete(i))};t.listeners.add(i)})}if(!(await s()))for(await n(i);;)if("visible"===e.currentState){if(await s())break;await n(i)}else await o(e)}const U=new Map;"document"in globalThis&&document.querySelectorAll("style[data-vite-dev-id]").forEach(t=>{U.set(t.getAttribute("data-vite-dev-id"),t)}),"document"in globalThis&&document.querySelector("meta[property=csp-nonce]");class z{constructor(){let t=document.getElementById("cursor-canvas");t&&t.remove(),this.canvas=document.createElement("canvas"),this.canvas.id="cursor-canvas",this.canvas.style.position="fixed",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.width="100vw",this.canvas.style.height="100vh",this.canvas.style.zIndex="999999",this.canvas.style.pointerEvents="none",document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.mouse={x:0,y:0},this.trail=[],this.maxTrailLength=40,this.tooltipTimeout=null,this.showTooltip=!1,this.holdStartTime=null,this.holdProgress=0,this.isHolding=!1,this.init(),this.bindEvents(),this.animate()}init(){this.resize(),window.addEventListener("resize",()=>this.resize()),setTimeout(()=>{if(this.canvas&&this.ctx){this.canvas.style.display="block",this.canvas.style.visibility="visible";const t=this.canvas.getBoundingClientRect();t.width>0&&t.height,document.body.style.cursor="none",this.isInitialized=!0}else this.restoreSystemCursor()},200),document.addEventListener("contextmenu",t=>t.preventDefault()),this.visibilityCheckInterval=setInterval(()=>{this.checkCursorVisibility()},5e3)}resize(){const t=window.devicePixelRatio||1,e=window.innerWidth,i=window.innerHeight;this.canvas.width=e*t,this.canvas.height=i*t,this.ctx.scale(t,t),this.canvas.style.width=e+"px",this.canvas.style.height=i+"px"}bindEvents(){document.addEventListener("mousemove",t=>{this.mouse.x=t.clientX,this.mouse.y=t.clientY,this.trail.push({x:t.clientX,y:t.clientY,time:Date.now()}),this.trail.length>this.maxTrailLength&&this.trail.shift()}),document.addEventListener("mouseleave",()=>{this.trail=[],this.clearTooltip()}),document.addEventListener("mouseover",t=>{t.target.classList.contains("gallery-photo")&&this.startTooltipTimer()}),document.addEventListener("mouseout",t=>{t.target.classList.contains("gallery-photo")&&this.clearTooltip()}),document.addEventListener("mouseover",t=>{t.target.hasAttribute("data-drag-scroll")&&this.clearTooltip()}),document.addEventListener("click",t=>{const e=t.target;"A"===e.tagName||"BUTTON"===e.tagName||e.onclick||"pointer"===e.style.cursor||(this.trail=[])})}getColorAtPosition(t,e){const i=document.elementFromPoint(t,e);if(!i)return"white";if(i.classList.contains("draggable-box")){const t=i.style.backgroundImage;if(t&&"none"!==t)return"black"}if(i.classList.contains("work"))return"black";if(i.classList.contains("scatter"))return"black";if(i.hasAttribute("data-drag-scroll")){i.getAttribute("data-drag-state");return"black"}let n=i,s=0;for(;n&&s<5;){if(n.textContent&&n.textContent.trim()&&"BODY"!==n.tagName&&"HTML"!==n.tagName){const t=window.getComputedStyle(n).color;if(t&&"rgba(0, 0, 0, 0)"!==t&&"transparent"!==t)return t}n=n.parentElement,s++}const o=window.getComputedStyle(i).backgroundColor;if("transparent"===o||"rgba(0, 0, 0, 0)"===o){const t=i.parentElement;if(t){const e=window.getComputedStyle(t).backgroundColor;return this.parseBackgroundColor(e)}}return this.parseBackgroundColor(o)}parseBackgroundColor(t){if(t.startsWith("rgb")){const e=t.match(/\d+/g);if(e&&e.length>=3){const t=parseInt(e[0]),i=parseInt(e[1]),n=parseInt(e[2]);if(t>180&&i>180&&n>180)return"#0002aa"}}return"white"===t||"#ffffff"===t||"#fff"===t?"#0002aa":"white"}drawArrow(t,e,i,n){this.ctx.save();const s=.6*n;this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.beginPath(),"left"===i?(this.ctx.moveTo(t+s/2,e-s/2),this.ctx.lineTo(t-s/2,e),this.ctx.lineTo(t+s/2,e+s/2)):"right"===i&&(this.ctx.moveTo(t-s/2,e-s/2),this.ctx.lineTo(t+s/2,e),this.ctx.lineTo(t-s/2,e+s/2)),this.ctx.lineWidth=4,this.ctx.strokeStyle="white",this.ctx.stroke(),this.ctx.lineWidth=2,this.ctx.strokeStyle="black",this.ctx.stroke(),this.ctx.restore()}drawX(t,e,i){this.ctx.save();const n=.6*i;this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.lineWidth=4,this.ctx.strokeStyle="white",this.ctx.beginPath(),this.ctx.moveTo(t-n/2,e-n/2),this.ctx.lineTo(t+n/2,e+n/2),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t+n/2,e-n/2),this.ctx.lineTo(t-n/2,e+n/2),this.ctx.stroke(),this.ctx.lineWidth=2,this.ctx.strokeStyle="black",this.ctx.beginPath(),this.ctx.moveTo(t-n/2,e-n/2),this.ctx.lineTo(t+n/2,e+n/2),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t+n/2,e-n/2),this.ctx.lineTo(t-n/2,e+n/2),this.ctx.stroke(),this.ctx.restore()}drawGrabCursor(t,e){this.ctx.save(),this.ctx.lineWidth=2,this.ctx.strokeStyle="black",this.ctx.fillStyle="white",this.ctx.beginPath(),this.ctx.arc(t,e,8,0,2*Math.PI),this.ctx.stroke(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(t-4,e-6),this.ctx.lineTo(t-2,e-8),this.ctx.moveTo(t-1,e-6),this.ctx.lineTo(t+1,e-8),this.ctx.moveTo(t+2,e-6),this.ctx.lineTo(t+4,e-8),this.ctx.stroke(),this.ctx.restore()}drawGrabbingCursor(t,e){this.ctx.save(),this.ctx.lineWidth=2,this.ctx.strokeStyle="black",this.ctx.fillStyle="white",this.ctx.beginPath(),this.ctx.arc(t,e,8,0,2*Math.PI),this.ctx.stroke(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(t-6,e-2),this.ctx.lineTo(t+6,e-2),this.ctx.moveTo(t-6,e+2),this.ctx.lineTo(t+6,e+2),this.ctx.stroke(),this.ctx.restore()}drawDragScrollCursor(t,e){this.ctx.save(),this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.arc(t,e,8,0,2*Math.PI),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t-16,e),this.ctx.lineTo(t-12,e-4),this.ctx.lineTo(t-12,e),this.ctx.lineTo(t-12,e+4),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(t+16,e),this.ctx.lineTo(t+12,e-4),this.ctx.lineTo(t+12,e),this.ctx.lineTo(t+12,e+4),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}drawGalleryImageCursor(t,e){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(t-16,e),this.ctx.lineTo(t-12,e-4),this.ctx.lineTo(t-12,e),this.ctx.lineTo(t-12,e+4),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(t+16,e),this.ctx.lineTo(t+12,e-4),this.ctx.lineTo(t+12,e),this.ctx.lineTo(t+12,e+4),this.ctx.closePath(),this.ctx.fill(),this.isHolding&&this.holdProgress>0?(this.ctx.lineWidth=1,this.ctx.strokeStyle=this.getColorAtPosition(t,e)||"white",this.ctx.beginPath(),this.ctx.arc(t,e,8,-Math.PI/2,-Math.PI/2+this.holdProgress*Math.PI*2),this.ctx.stroke()):(this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.arc(t,e,8,0,2*Math.PI),this.ctx.stroke()),this.showTooltip&&this.drawTooltip(t,e),this.ctx.restore()}drawTooltip(t,e){this.ctx.save(),this.ctx.font="12px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle="black";const i=e+25;this.ctx.fillText("hold",t,i),this.ctx.restore()}startTooltipTimer(){this.clearTooltip(),this.tooltipTimeout=setTimeout(()=>{this.showTooltip=!0},1e3)}clearTooltip(){this.tooltipTimeout&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=null),this.showTooltip=!1,this.isHolding=!1,this.holdProgress=0,this.holdStartTime=null}startHoldAnimation(){this.isHolding=!0,this.holdStartTime=Date.now(),this.holdProgress=0}updateHoldAnimation(){if(this.isHolding&&this.holdStartTime){const t=Date.now()-this.holdStartTime;this.holdProgress=Math.min(t/500,1),this.holdProgress>=1&&(this.isHolding=!1,this.holdProgress=0,this.holdStartTime=null)}}checkCursorVisibility(){if(!this.canvas||!this.ctx||!this.isInitialized)return void this.restoreSystemCursor();const t=this.canvas.getBoundingClientRect();0!==t.width&&0!==t.height&&document.body.contains(this.canvas)||this.restoreSystemCursor()}restoreSystemCursor(){document.body.style.cursor="auto",document.documentElement.style.cursor="auto",this.visibilityCheckInterval&&clearInterval(this.visibilityCheckInterval),this.isInitialized=!1,setTimeout(()=>{this.isInitialized||this.attemptReinitialization()},2e3)}attemptReinitialization(){try{this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=document.createElement("canvas"),this.canvas.id="cursor-canvas",this.canvas.style.position="fixed",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.width="100vw",this.canvas.style.height="100vh",this.canvas.style.zIndex="100001",this.canvas.style.pointerEvents="none",document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx?(this.init(),this.bindEvents(),this.animate()):document.body.style.cursor="auto"}catch(t){document.body.style.cursor="auto"}}animate(){if(!this.isInitialized||!this.canvas||!this.ctx)return void requestAnimationFrame(()=>this.animate());this.ctx.clearRect(0,0,window.innerWidth,window.innerHeight);const t=document.querySelector(".image-viewer.active"),e=document.elementFromPoint(this.mouse.x,this.mouse.y),i=t&&e&&(e===t||t.contains(e)),n=document.getElementById("viewerImage"),s=t&&e===n,o=t&&t.classList.contains("cursor-left"),r=t&&t.classList.contains("cursor-right"),a=i&&s&&(o||r),c=i&&!s;if(this.trail.length>1&&!a&&!c){this.ctx.save(),this.ctx.lineWidth=1,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.globalAlpha=1;for(let t=1;t<this.trail.length;t++){const e=this.trail[t-1],i=this.trail[t],n=(e.x+i.x)/2,s=(e.y+i.y)/2,o=this.getColorAtPosition(n,s);this.ctx.strokeStyle=o,this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(i.x,i.y),this.ctx.stroke()}this.ctx.restore()}const l=this.getColorAtPosition(this.mouse.x,this.mouse.y)||"white",d=e&&["A","BUTTON","INPUT","TEXTAREA","SELECT","LABEL","SUMMARY"].includes(e.tagName),h=e&&e.getAttribute&&e.getAttribute("role"),u=h&&["button","link","tab","switch","checkbox","radio","menuitem"].includes(h),m=e?window.getComputedStyle(e).cursor:"",p=!(!e||!(d||u||e.onclick||"pointer"===m)),f=e&&e.hasAttribute("data-drag-scroll");f&&e.getAttribute("data-drag-state");const v=e&&e.classList.contains("gallery-photo");if(this.ctx.save(),this.ctx.strokeStyle=l,this.ctx.fillStyle=l,this.ctx.lineWidth=1,this.ctx.font="16px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle",a){const t=24;o?this.drawArrow(this.mouse.x,this.mouse.y,"left",t):r&&this.drawArrow(this.mouse.x,this.mouse.y,"right",t)}else if(c){const t=24;this.drawX(this.mouse.x,this.mouse.y,t)}else f?this.drawDragScrollCursor(this.mouse.x,this.mouse.y):v?this.drawGalleryImageCursor(this.mouse.x,this.mouse.y):p?(this.ctx.beginPath(),this.ctx.arc(this.mouse.x,this.mouse.y,8,0,2*Math.PI),this.ctx.stroke()):(this.ctx.beginPath(),this.ctx.arc(this.mouse.x,this.mouse.y,3,0,2*Math.PI),this.ctx.fill());this.ctx.restore(),this.updateHoldAnimation(),requestAnimationFrame(()=>this.animate())}destroy(){this.visibilityCheckInterval&&clearInterval(this.visibilityCheckInterval),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),document.body.style.cursor="auto",document.documentElement.style.cursor="auto",this.isInitialized=!1}}function W(){if(window.cursorInitializationAttempted)return;window.cursorInitializationAttempted=!0;let t=0;!function e(){t++;try{if(function(){try{if("undefined"==typeof window||"undefined"==typeof document)return;if("ontouchstart"in window||navigator.maxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches)return document.body.style.cursor="auto",void(document.documentElement.style.cursor="auto");const t=document.createElement("canvas");if(!t.getContext||!t.getContext("2d"))return document.body.style.cursor="auto",void(document.documentElement.style.cursor="auto");window.customCursor=new z}catch(t){document.body.style.cursor="auto",document.documentElement.style.cursor="auto";const e=document.createElement("style");e.id="cursor-fallback",e.textContent="\n      * { cursor: auto !important; }\n      body { cursor: auto !important; }\n      html { cursor: auto !important; }\n      a, button, input, textarea, select, label, summary { cursor: pointer !important; }\n    ",document.head.appendChild(e),document.body.style.cursor="auto",document.documentElement.style.cursor="auto",window.restoreCursor=function(){document.body.style.cursor="auto",document.documentElement.style.cursor="auto",window.customCursor&&(window.customCursor.destroy(),window.customCursor=null)};const i=()=>{"none"!==document.body.style.cursor||window.customCursor||(document.body.style.cursor="auto",document.documentElement.style.cursor="auto")};document.addEventListener("mousemove",i,{once:!0}),document.addEventListener("click",i,{once:!0}),document.addEventListener("keydown",i,{once:!0})}}(),window.customCursor)return}catch(i){}t<3?setTimeout(e,100*t):(document.body.style.cursor="auto",document.documentElement.style.cursor="auto")}()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",W):W(),setTimeout(()=>{window.customCursor||window.cursorInitializationAttempted||W()},500);let H=null;setTimeout(function(){H||(H=setInterval(()=>{"none"!==document.body.style.cursor||window.customCursor&&window.customCursor.isInitialized||(document.body.style.cursor="auto",document.documentElement.style.cursor="auto",window.customCursor||setTimeout(()=>{window.customCursor||W()},1e3))},2e3))},3e3),window.addEventListener("beforeunload",()=>{H&&clearInterval(H)});
